!function(){"use strict";function t(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function n(n){return function(n){if(Array.isArray(n))return t(n)}(n)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(n,e){if(n){if("string"===typeof n)return t(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);return"Object"===i&&n.constructor&&(i=n.constructor.name),"Map"===i||"Set"===i?Array.from(n):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(n,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t){var n=function(t,n){if("object"!==i(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===i(n)?n:String(n)}function o(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}function a(t,n,e){return n&&o(t.prototype,n),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,n){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},s(t,n)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function l(t,n){if(n&&("object"===i(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function c(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,i=u(t);if(n){var r=u(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return l(this,e)}}function f(t){return function(){return t}}function h(t){return 1e-6*(t()-.5)}function d(t){return t.index}function y(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}var g={value:function(){}};function v(){for(var t,n=0,e=arguments.length,i={};n<e;++n){if(!(t=arguments[n]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new p(i)}function p(t){this._=t}function _(t,n){for(var e,i=0,r=t.length;i<r;++i)if((e=t[i]).name===n)return e.value}function x(t,n,e){for(var i=0,r=t.length;i<r;++i)if(t[i].name===n){t[i]=g,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=e&&t.push({name:n,value:e}),t}p.prototype=v.prototype={constructor:p,on:function(t,n){var e,i,r=this._,o=(i=r,(t+"").trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!==typeof n)throw new Error("invalid callback: "+n);for(;++a<s;)if(e=(t=o[a]).type)r[e]=x(r[e],t.name,n);else if(null==n)for(e in r)r[e]=x(r[e],t.name,null);return this}for(;++a<s;)if((e=(t=o[a]).type)&&(e=_(r[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new p(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,i,r=new Array(e),o=0;o<e;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(i=this._[t]).length;o<e;++o)i[o].value.apply(n,r)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(n,e)}};var m,N,S=v,w=0,b=0,D=0,k=1e3,A=0,I=0,E=0,T="object"===typeof performance&&performance.now?performance:Date,O="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function M(){return I||(O(P),I=T.now()+E)}function P(){I=0}function R(){this._call=this._time=this._next=null}function U(t,n,e){var i=new R;return i.restart(t,n,e),i}function j(){I=(A=T.now())+E,w=b=0;try{!function(){M(),++w;for(var t,n=m;n;)(t=I-n._time)>=0&&n._call.call(void 0,t),n=n._next;--w}()}finally{w=0,function(){var t,n,e=m,i=1/0;for(;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:m=n);N=t,L(i)}(),I=0}}function B(){var t=T.now(),n=t-A;n>k&&(E-=n,A=t)}function L(t){w||(b&&(b=clearTimeout(b)),t-I>24?(t<1/0&&(b=setTimeout(j,t-T.now()-E)),D&&(D=clearInterval(D))):(D||(A=T.now(),D=setInterval(B,k)),w=1,O(j)))}R.prototype=U.prototype={constructor:R,restart:function(t,n,e){if("function"!==typeof t)throw new TypeError("callback is not a function");e=(null==e?M():+e)+(null==n?0:+n),this._next||N===this||(N?N._next=this:m=this,N=this),this._call=t,this._time=e,L()},stop:function(){this._call&&(this._call=null,this._time=1/0,L())}};var G=1664525,z=1013904223,F=4294967296;function q(t){return t.x}function C(t){return t.y}var Y=Math.PI*(3-Math.sqrt(5));function X(t){var n,e=1,i=.001,r=1-Math.pow(i,1/300),o=0,a=.6,s=new Map,u=U(f),l=S("tick","end"),c=function(){var t=1;return function(){return(t=(G*t+z)%F)/F}}();function f(){h(),l.call("tick",n),e<i&&(u.stop(),l.call("end",n))}function h(i){var u,l,c=t.length;void 0===i&&(i=1);for(var f=0;f<i;++f)for(e+=(o-e)*r,s.forEach((function(t){t(e)})),u=0;u<c;++u)null==(l=t[u]).fx?l.x+=l.vx*=a:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=a:(l.y=l.fy,l.vy=0);return n}function d(){for(var n,e=0,i=t.length;e<i;++e){if((n=t[e]).index=e,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var r=10*Math.sqrt(.5+e),o=e*Y;n.x=r*Math.cos(o),n.y=r*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function y(n){return n.initialize&&n.initialize(t,c),n}return null==t&&(t=[]),d(),n={tick:h,restart:function(){return u.restart(f),n},stop:function(){return u.stop(),n},nodes:function(e){return arguments.length?(t=e,d(),s.forEach(y),n):t},alpha:function(t){return arguments.length?(e=+t,n):e},alphaMin:function(t){return arguments.length?(i=+t,n):i},alphaDecay:function(t){return arguments.length?(r=+t,n):+r},alphaTarget:function(t){return arguments.length?(o=+t,n):o},velocityDecay:function(t){return arguments.length?(a=1-t,n):1-a},randomSource:function(t){return arguments.length?(c=t,s.forEach(y),n):c},force:function(t,e){return arguments.length>1?(null==e?s.delete(t):s.set(t,y(e)),n):s.get(t)},find:function(n,e,i){var r,o,a,s,u,l=0,c=t.length;for(null==i?i=1/0:i*=i,l=0;l<c;++l)(a=(r=n-(s=t[l]).x)*r+(o=e-s.y)*o)<i&&(u=s,i=a);return u},on:function(t,e){return arguments.length>1?(l.on(t,e),n):l.on(t)}}}function K(t,n,e,i){if(isNaN(n)||isNaN(e))return t;var r,o,a,s,u,l,c,f,h,d=t._root,y={data:i},g=t._x0,v=t._y0,p=t._x1,_=t._y1;if(!d)return t._root=y,t;for(;d.length;)if((l=n>=(o=(g+p)/2))?g=o:p=o,(c=e>=(a=(v+_)/2))?v=a:_=a,r=d,!(d=d[f=c<<1|l]))return r[f]=y,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),n===s&&e===u)return y.next=d,r?r[f]=y:t._root=y,t;do{r=r?r[f]=new Array(4):t._root=new Array(4),(l=n>=(o=(g+p)/2))?g=o:p=o,(c=e>=(a=(v+_)/2))?v=a:_=a}while((f=c<<1|l)===(h=(u>=a)<<1|s>=o));return r[h]=d,r[f]=y,t}function $(t,n,e,i,r){this.node=t,this.x0=n,this.y0=e,this.x1=i,this.y1=r}function H(t){return t[0]}function J(t){return t[1]}function Q(t,n,e){var i=new V(null==n?H:n,null==e?J:e,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function V(t,n,e,i,r,o){this._x=t,this._y=n,this._x0=e,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function W(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var Z=Q.prototype=V.prototype;function tt(t){return t.x+t.vx}function nt(t){return t.y+t.vy}Z.copy=function(){var t,n,e=new V(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return e;if(!i.length)return e._root=W(i),e;for(t=[{source:i,target:e._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(n=i.source[r])&&(n.length?t.push({source:n,target:i.target[r]=new Array(4)}):i.target[r]=W(n));return e},Z.add=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return K(this.cover(n,e),n,e,t)},Z.addAll=function(t){var n,e,i,r,o=t.length,a=new Array(o),s=new Array(o),u=1/0,l=1/0,c=-1/0,f=-1/0;for(e=0;e<o;++e)isNaN(i=+this._x.call(null,n=t[e]))||isNaN(r=+this._y.call(null,n))||(a[e]=i,s[e]=r,i<u&&(u=i),i>c&&(c=i),r<l&&(l=r),r>f&&(f=r));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),e=0;e<o;++e)K(this,a[e],s[e],t[e]);return this},Z.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(e))r=(e=Math.floor(t))+1,o=(i=Math.floor(n))+1;else{for(var a,s,u=r-e||1,l=this._root;e>t||t>=r||i>n||n>=o;)switch(s=(n<i)<<1|t<e,(a=new Array(4))[s]=l,l=a,u*=2,s){case 0:r=e+u,o=i+u;break;case 1:e=r-u,o=i+u;break;case 2:r=e+u,i=o-u;break;case 3:e=r-u,i=o-u}this._root&&this._root.length&&(this._root=l)}return this._x0=e,this._y0=i,this._x1=r,this._y1=o,this},Z.data=function(){var t=[];return this.visit((function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)})),t},Z.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Z.find=function(t,n,e){var i,r,o,a,s,u,l,c=this._x0,f=this._y0,h=this._x1,d=this._y1,y=[],g=this._root;for(g&&y.push(new $(g,c,f,h,d)),null==e?e=1/0:(c=t-e,f=n-e,h=t+e,d=n+e,e*=e);u=y.pop();)if(!(!(g=u.node)||(r=u.x0)>h||(o=u.y0)>d||(a=u.x1)<c||(s=u.y1)<f))if(g.length){var v=(r+a)/2,p=(o+s)/2;y.push(new $(g[3],v,p,a,s),new $(g[2],r,p,v,s),new $(g[1],v,o,a,p),new $(g[0],r,o,v,p)),(l=(n>=p)<<1|t>=v)&&(u=y[y.length-1],y[y.length-1]=y[y.length-1-l],y[y.length-1-l]=u)}else{var _=t-+this._x.call(null,g.data),x=n-+this._y.call(null,g.data),m=_*_+x*x;if(m<e){var N=Math.sqrt(e=m);c=t-N,f=n-N,h=t+N,d=n+N,i=g.data}}return i},Z.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var n,e,i,r,o,a,s,u,l,c,f,h,d=this._root,y=this._x0,g=this._y0,v=this._x1,p=this._y1;if(!d)return this;if(d.length)for(;;){if((l=o>=(s=(y+v)/2))?y=s:v=s,(c=a>=(u=(g+p)/2))?g=u:p=u,n=d,!(d=d[f=c<<1|l]))return this;if(!d.length)break;(n[f+1&3]||n[f+2&3]||n[f+3&3])&&(e=n,h=f)}for(;d.data!==t;)if(i=d,!(d=d.next))return this;return(r=d.next)&&delete d.next,i?(r?i.next=r:delete i.next,this):n?(r?n[f]=r:delete n[f],(d=n[0]||n[1]||n[2]||n[3])&&d===(n[3]||n[2]||n[1]||n[0])&&!d.length&&(e?e[h]=d:this._root=d),this):(this._root=r,this)},Z.removeAll=function(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},Z.root=function(){return this._root},Z.size=function(){var t=0;return this.visit((function(n){if(!n.length)do{++t}while(n=n.next)})),t},Z.visit=function(t){var n,e,i,r,o,a,s=[],u=this._root;for(u&&s.push(new $(u,this._x0,this._y0,this._x1,this._y1));n=s.pop();)if(!t(u=n.node,i=n.x0,r=n.y0,o=n.x1,a=n.y1)&&u.length){var l=(i+o)/2,c=(r+a)/2;(e=u[3])&&s.push(new $(e,l,c,o,a)),(e=u[2])&&s.push(new $(e,i,c,l,a)),(e=u[1])&&s.push(new $(e,l,r,o,c)),(e=u[0])&&s.push(new $(e,i,r,l,c))}return this},Z.visitAfter=function(t){var n,e=[],i=[];for(this._root&&e.push(new $(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var r=n.node;if(r.length){var o,a=n.x0,s=n.y0,u=n.x1,l=n.y1,c=(a+u)/2,f=(s+l)/2;(o=r[0])&&e.push(new $(o,a,s,c,f)),(o=r[1])&&e.push(new $(o,c,s,u,f)),(o=r[2])&&e.push(new $(o,a,f,c,l)),(o=r[3])&&e.push(new $(o,c,f,u,l))}i.push(n)}for(;n=i.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},Z.x=function(t){return arguments.length?(this._x=t,this):this._x},Z.y=function(t){return arguments.length?(this._y=t,this):this._y};var et,it=function(){function t(){e(this,t),this._listeners=new Map}return a(t,[{key:"once",value:function(t,n){var e={callable:n,isOnce:!0},i=this._listeners.get(t);return i?i.push(e):this._listeners.set(t,[e]),this}},{key:"on",value:function(t,n){var e={callable:n},i=this._listeners.get(t);return i?i.push(e):this._listeners.set(t,[e]),this}},{key:"off",value:function(t,n){var e=this._listeners.get(t);if(e){var i=e.filter((function(t){return t.callable!==n}));this._listeners.set(t,i)}return this}},{key:"emit",value:function(t,n){var e=this._listeners.get(t);if(!e||0===e.length)return!1;for(var i=!1,r=0;r<e.length;r++)e[r].isOnce&&(i=!0),e[r].callable(n);if(i){var o=e.filter((function(t){return!t.isOnce}));this._listeners.set(t,o)}return!0}},{key:"eventNames",value:function(){return n(this._listeners.keys())}},{key:"listenerCount",value:function(t){var n=this._listeners.get(t);return n?n.length:0}},{key:"listeners",value:function(t){var n=this._listeners.get(t);return n?n.map((function(t){return t.callable})):[]}},{key:"addListener",value:function(t,n){return this.on(t,n)}},{key:"removeListener",value:function(t,n){return this.off(t,n)}},{key:"removeAllListeners",value:function(t){return t?this._listeners.delete(t):this._listeners.clear(),this}}]),t}(),rt=function(t){return t instanceof Date},ot=function(t){return Array.isArray(t)},at=function(t){return null!==t&&"object"===typeof t&&"Object"===t.constructor.name},st=function(t){return rt(t)?lt(t):ot(t)?ct(t):at(t)?ft(t):t},ut=function t(n,e){var i=rt(n),r=rt(e);if(i&&!r||!i&&r)return!1;if(i&&r)return n.getTime()===e.getTime();var o=ot(n),a=ot(e);if(o&&!a||!o&&a)return!1;if(o&&a)return n.length===e.length&&n.every((function(n,i){return t(n,e[i])}));var s=at(n),u=at(e);if(s&&!u||!s&&u)return!1;if(s&&u){var l=Object.keys(n),c=Object.keys(e);return!!t(l,c)&&l.every((function(i){return t(n[i],e[i])}))}return n===e},lt=function(t){return new Date(t)},ct=function(t){return t.map((function(t){return st(t)}))},ft=function(t){var n={};return Object.keys(t).forEach((function(e){n[e]=st(t[e])})),n};!function(t){t.TICK="tick",t.END="end",t.SIMULATION_START="simulation-start",t.SIMULATION_PROGRESS="simulation-progress",t.SIMULATION_END="simulation-end",t.NODE_DRAG="node-drag",t.SETTINGS_UPDATE="settings-update"}(et||(et={}));var ht,dt,yt,gt={isPhysicsEnabled:!1,alpha:{alpha:1,alphaMin:.001,alphaDecay:.0228,alphaTarget:.1},centering:{x:0,y:0,strength:1},collision:{radius:15,strength:1,iterations:1},links:{distance:30,strength:void 0,iterations:1},manyBody:{strength:-100,theta:.9,distanceMin:0,distanceMax:(ht=30,100*(ht>0?ht:1))},positioning:{forceX:{x:0,strength:.1},forceY:{y:0,strength:.1}}},vt=function(t){!function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&s(t,n)}(r,t);var i=c(r);function r(t){var n;return e(this,r),(n=i.call(this))._edges=[],n._nodes=[],n._nodeIndexByNodeId={},n._isDragging=!1,n._isStabilizing=!1,n.linkForce=function(t){var n,e,i,r,o,a,s=d,u=function(t){return 1/Math.min(r[t.source.index],r[t.target.index])},l=f(30),c=1;function g(i){for(var r=0,s=t.length;r<c;++r)for(var u,l,f,d,y,g,v,p=0;p<s;++p)l=(u=t[p]).source,d=(f=u.target).x+f.vx-l.x-l.vx||h(a),y=f.y+f.vy-l.y-l.vy||h(a),d*=g=((g=Math.sqrt(d*d+y*y))-e[p])/g*i*n[p],y*=g,f.vx-=d*(v=o[p]),f.vy-=y*v,l.vx+=d*(v=1-v),l.vy+=y*v}function v(){if(i){var a,u,l=i.length,c=t.length,f=new Map(i.map((function(t,n){return[s(t,n,i),t]})));for(a=0,r=new Array(l);a<c;++a)(u=t[a]).index=a,"object"!==typeof u.source&&(u.source=y(f,u.source)),"object"!==typeof u.target&&(u.target=y(f,u.target)),r[u.source.index]=(r[u.source.index]||0)+1,r[u.target.index]=(r[u.target.index]||0)+1;for(a=0,o=new Array(c);a<c;++a)u=t[a],o[a]=r[u.source.index]/(r[u.source.index]+r[u.target.index]);n=new Array(c),p(),e=new Array(c),_()}}function p(){if(i)for(var e=0,r=t.length;e<r;++e)n[e]=+u(t[e],e,t)}function _(){if(i)for(var n=0,r=t.length;n<r;++n)e[n]=+l(t[n],n,t)}return null==t&&(t=[]),g.initialize=function(t,n){i=t,a=n,v()},g.links=function(n){return arguments.length?(t=n,v(),g):t},g.id=function(t){return arguments.length?(s=t,g):s},g.iterations=function(t){return arguments.length?(c=+t,g):c},g.strength=function(t){return arguments.length?(u="function"===typeof t?t:f(+t),p(),g):u},g.distance=function(t){return arguments.length?(l="function"===typeof t?t:f(+t),_(),g):l},g}(n._edges).id((function(t){return t.id})),n.simulation=X(n._nodes).force("link",n.linkForce).stop(),n.settings=Object.assign(st(gt),t),n.initSimulation(n.settings),n.simulation.on("tick",(function(){n.emit(et.TICK,{nodes:n._nodes,edges:n._edges})})),n.simulation.on("end",(function(){n._isDragging=!1,n._isStabilizing=!1,n.emit(et.END,{nodes:n._nodes,edges:n._edges})})),n}return a(r,[{key:"getSettings",value:function(){return st(this.settings)}},{key:"setSettings",value:function(t){var n=this,e=this.getSettings();Object.keys(t).forEach((function(e){n.settings[e]=t[e]})),ut(this.settings,e)||(this.initSimulation(t),this.emit(et.SETTINGS_UPDATE,{settings:this.settings}),this.runSimulation({isUpdatingSettings:!0}))}},{key:"startDragNode",value:function(){this._isDragging=!0,!this._isStabilizing&&this.settings.isPhysicsEnabled&&this.activateSimulation()}},{key:"dragNode",value:function(t){var n=this._nodes[this._nodeIndexByNodeId[t.id]];n&&(this._isDragging||this.startDragNode(),n.fx=t.x,n.fy=t.y,this.settings.isPhysicsEnabled||(n.x=t.x,n.y=t.y,this.emit(et.NODE_DRAG,{nodes:this._nodes,edges:this._edges})))}},{key:"endDragNode",value:function(t){this._isDragging=!1,this.simulation.alphaTarget(0);var n=this._nodes[this._nodeIndexByNodeId[t.id]];n&&this.settings.isPhysicsEnabled&&_t(n)}},{key:"activateSimulation",value:function(){this.settings.isPhysicsEnabled&&(this.simulation.alphaTarget(this.settings.alpha.alphaTarget).restart(),this.releaseNodes())}},{key:"fixDefinedNodes",value:function(t){for(var n=0;n<t.nodes.length;n++)null!==t.nodes[n].x&&void 0!==t.nodes[n].x&&(t.nodes[n].fx=t.nodes[n].x),null!==t.nodes[n].y&&void 0!==t.nodes[n].y&&(t.nodes[n].fy=t.nodes[n].y);return t}},{key:"addData",value:function(t){t=this.fixDefinedNodes(t),this._nodes.concat(t.nodes),this._edges.concat(t.edges),this.setNodeIndexByNodeId()}},{key:"clearData",value:function(){this._nodes=[],this._edges=[],this.setNodeIndexByNodeId()}},{key:"setData",value:function(t){t=this.fixDefinedNodes(t),this.clearData(),this.addData(t)}},{key:"updateData",value:function(t){var e=this;t=this.fixDefinedNodes(t);var i=new Set(t.nodes.map((function(t){return t.id}))),r=this._nodes.filter((function(t){return i.has(t.id)})),o=t.nodes.filter((function(t){return void 0===e._nodeIndexByNodeId[t.id]}));this._nodes=[].concat(n(r),n(o)),this.setNodeIndexByNodeId(),this._edges=t.edges,this.simulation.nodes(this._nodes),this.linkForce.links(this._edges)}},{key:"simulate",value:function(){this.simulation.nodes(this._nodes),this.linkForce.links(this._edges),this.runSimulation(),this.settings.isPhysicsEnabled||this.fixNodes()}},{key:"startSimulation",value:function(t){this.setData(t),this.simulation.nodes(this._nodes),this.linkForce.links(this._edges),this.runSimulation()}},{key:"updateSimulation",value:function(t){var e=this,i=new Set(t.nodes.map((function(t){return t.id}))),r=t.nodes.filter((function(t){return void 0===e._nodeIndexByNodeId[t.id]})),o=this._nodes.filter((function(t){return i.has(t.id)}));this.settings.isPhysicsEnabled||o.forEach((function(t){return pt(t)})),this._nodes=[].concat(n(o),n(r)),this.setNodeIndexByNodeId(),this._edges=t.edges,this.simulation.nodes(this._nodes),this.linkForce.links(this._edges),this.settings.isPhysicsEnabled||r.length?this.runSimulation({isUpdatingSettings:!0}):this.emit(et.SIMULATION_END,{nodes:this._nodes,edges:this._edges})}},{key:"stopSimulation",value:function(){this.simulation.stop(),this._nodes=[],this._edges=[],this.setNodeIndexByNodeId(),this.simulation.nodes(),this.linkForce.links()}},{key:"initSimulation",value:function(t){var n,e,i,r;if(t.alpha&&this.simulation.alpha(t.alpha.alpha).alphaMin(t.alpha.alphaMin).alphaDecay(t.alpha.alphaDecay).alphaTarget(t.alpha.alphaTarget),t.links&&this.linkForce.distance(t.links.distance).iterations(t.links.iterations),t.collision){var o=function(t){var n,e,i,r=1,o=1;function a(){for(var t,a,u,l,c,f,d,y=n.length,g=0;g<o;++g)for(a=Q(n,tt,nt).visitAfter(s),t=0;t<y;++t)u=n[t],f=e[u.index],d=f*f,l=u.x+u.vx,c=u.y+u.vy,a.visit(v);function v(t,n,e,o,a){var s=t.data,y=t.r,g=f+y;if(!s)return n>l+g||o<l-g||e>c+g||a<c-g;if(s.index>u.index){var v=l-s.x-s.vx,p=c-s.y-s.vy,_=v*v+p*p;_<g*g&&(0===v&&(_+=(v=h(i))*v),0===p&&(_+=(p=h(i))*p),_=(g-(_=Math.sqrt(_)))/_*r,u.vx+=(v*=_)*(g=(y*=y)/(d+y)),u.vy+=(p*=_)*g,s.vx-=v*(g=1-g),s.vy-=p*g)}}}function s(t){if(t.data)return t.r=e[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function u(){if(n){var i,r,o=n.length;for(e=new Array(o),i=0;i<o;++i)r=n[i],e[r.index]=+t(r,i,n)}}return"function"!==typeof t&&(t=f(null==t?1:+t)),a.initialize=function(t,e){n=t,i=e,u()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(r=+t,a):r},a.radius=function(n){return arguments.length?(t="function"===typeof n?n:f(+n),u(),a):t},a}().radius(t.collision.radius).strength(t.collision.strength).iterations(t.collision.iterations);this.simulation.force("collide",o)}if(null===t.collision&&this.simulation.force("collide",null),t.manyBody){var a=function(){var t,n,e,i,r,o=f(-30),a=1,s=1/0,u=.81;function l(e){var r,o=t.length,a=Q(t,q,C).visitAfter(d);for(i=e,r=0;r<o;++r)n=t[r],a.visit(y)}function c(){if(t){var n,e,i=t.length;for(r=new Array(i),n=0;n<i;++n)e=t[n],r[e.index]=+o(e,n,t)}}function d(t){var n,e,i,o,a,s=0,u=0;if(t.length){for(i=o=a=0;a<4;++a)(n=t[a])&&(e=Math.abs(n.value))&&(s+=n.value,u+=e,i+=e*n.x,o+=e*n.y);t.x=i/u,t.y=o/u}else{(n=t).x=n.data.x,n.y=n.data.y;do{s+=r[n.data.index]}while(n=n.next)}t.value=s}function y(t,o,l,c){if(!t.value)return!0;var f=t.x-n.x,d=t.y-n.y,y=c-o,g=f*f+d*d;if(y*y/u<g)return g<s&&(0===f&&(g+=(f=h(e))*f),0===d&&(g+=(d=h(e))*d),g<a&&(g=Math.sqrt(a*g)),n.vx+=f*t.value*i/g,n.vy+=d*t.value*i/g),!0;if(!(t.length||g>=s)){(t.data!==n||t.next)&&(0===f&&(g+=(f=h(e))*f),0===d&&(g+=(d=h(e))*d),g<a&&(g=Math.sqrt(a*g)));do{t.data!==n&&(y=r[t.data.index]*i/g,n.vx+=f*y,n.vy+=d*y)}while(t=t.next)}}return l.initialize=function(n,i){t=n,e=i,c()},l.strength=function(t){return arguments.length?(o="function"===typeof t?t:f(+t),c(),l):o},l.distanceMin=function(t){return arguments.length?(a=t*t,l):Math.sqrt(a)},l.distanceMax=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l.theta=function(t){return arguments.length?(u=t*t,l):Math.sqrt(u)},l}().strength(t.manyBody.strength).theta(t.manyBody.theta).distanceMin(t.manyBody.distanceMin).distanceMax(t.manyBody.distanceMax);this.simulation.force("charge",a)}if(null===t.manyBody&&this.simulation.force("charge",null),null===(n=t.positioning)||void 0===n?void 0:n.forceY){var s=function(t){var n,e,i,r=f(.1);function o(t){for(var r,o=0,a=n.length;o<a;++o)(r=n[o]).vx+=(i[o]-r.x)*e[o]*t}function a(){if(n){var o,a=n.length;for(e=new Array(a),i=new Array(a),o=0;o<a;++o)e[o]=isNaN(i[o]=+t(n[o],o,n))?0:+r(n[o],o,n)}}return"function"!==typeof t&&(t=f(null==t?0:+t)),o.initialize=function(t){n=t,a()},o.strength=function(t){return arguments.length?(r="function"===typeof t?t:f(+t),a(),o):r},o.x=function(n){return arguments.length?(t="function"===typeof n?n:f(+n),a(),o):t},o}(t.positioning.forceX.x).strength(t.positioning.forceX.strength);this.simulation.force("x",s)}if(null===(null===(e=t.positioning)||void 0===e?void 0:e.forceX)&&this.simulation.force("x",null),null===(i=t.positioning)||void 0===i?void 0:i.forceY){var u=function(t){var n,e,i,r=f(.1);function o(t){for(var r,o=0,a=n.length;o<a;++o)(r=n[o]).vy+=(i[o]-r.y)*e[o]*t}function a(){if(n){var o,a=n.length;for(e=new Array(a),i=new Array(a),o=0;o<a;++o)e[o]=isNaN(i[o]=+t(n[o],o,n))?0:+r(n[o],o,n)}}return"function"!==typeof t&&(t=f(null==t?0:+t)),o.initialize=function(t){n=t,a()},o.strength=function(t){return arguments.length?(r="function"===typeof t?t:f(+t),a(),o):r},o.y=function(n){return arguments.length?(t="function"===typeof n?n:f(+n),a(),o):t},o}(t.positioning.forceY.y).strength(t.positioning.forceY.strength);this.simulation.force("y",u)}if(null===(null===(r=t.positioning)||void 0===r?void 0:r.forceY)&&this.simulation.force("y",null),t.centering){var l=function(t,n){var e,i=1;function r(){var r,o,a=e.length,s=0,u=0;for(r=0;r<a;++r)s+=(o=e[r]).x,u+=o.y;for(s=(s/a-t)*i,u=(u/a-n)*i,r=0;r<a;++r)(o=e[r]).x-=s,o.y-=u}return null==t&&(t=0),null==n&&(n=0),r.initialize=function(t){e=t},r.x=function(n){return arguments.length?(t=+n,r):t},r.y=function(t){return arguments.length?(n=+t,r):n},r.strength=function(t){return arguments.length?(i=+t,r):i},r}(t.centering.x,t.centering.y).strength(t.centering.strength);this.simulation.force("center",l)}null===t.centering&&this.simulation.force("center",null)}},{key:"runSimulation",value:function(t){if(!this._isStabilizing){(this.settings.isPhysicsEnabled||(null===t||void 0===t?void 0:t.isUpdatingSettings))&&this.releaseNodes(),this.emit(et.SIMULATION_START,void 0),this._isStabilizing=!0,this.simulation.alpha(this.settings.alpha.alpha).alphaTarget(this.settings.alpha.alphaTarget).stop();for(var n=Math.ceil(Math.log(this.settings.alpha.alphaMin)/Math.log(1-this.settings.alpha.alphaDecay)),e=-1,i=0;i<n;i++){var r=Math.round(100*i/n);r>e&&(e=r,this.emit(et.SIMULATION_PROGRESS,{nodes:this._nodes,edges:this._edges,progress:r/100})),this.simulation.tick()}this.settings.isPhysicsEnabled||this.fixNodes(),this._isStabilizing=!1,this.emit(et.SIMULATION_END,{nodes:this._nodes,edges:this._edges})}}},{key:"setNodeIndexByNodeId",value:function(){this._nodeIndexByNodeId={};for(var t=0;t<this._nodes.length;t++)this._nodeIndexByNodeId[this._nodes[t].id]=t}},{key:"fixNodes",value:function(t){t||(t=this._nodes);for(var n=0;n<t.length;n++)pt(this._nodes[n])}},{key:"releaseNodes",value:function(t){t||(t=this._nodes);for(var n=0;n<t.length;n++)_t(this._nodes[n])}}]),r}(it),pt=function(t){t.fx=t.x,t.fy=t.y},_t=function(t){t.fx=null,t.fy=null};!function(t){t.SetData="Set Data",t.AddData="Add Data",t.UpdateData="Update Data",t.ClearData="Clear Data",t.Simulate="Simulate",t.ActivateSimulation="Activate Simulation",t.StartSimulation="Start Simulation",t.UpdateSimulation="Update Simulation",t.StopSimulation="Stop Simulation",t.StartDragNode="Start Drag Node",t.DragNode="Drag Node",t.EndDragNode="End Drag Node",t.FixNodes="Fix Nodes",t.ReleaseNodes="Release Nodes",t.SetSettings="Set Settings"}(dt||(dt={})),function(t){t.SIMULATION_START="simulation-start",t.SIMULATION_PROGRESS="simulation-progress",t.SIMULATION_END="simulation-end",t.NODE_DRAG="node-drag",t.NODE_DRAG_END="node-drag-end",t.SETTINGS_UPDATE="settings-update"}(yt||(yt={}));var xt=new vt,mt=function(t){postMessage(t)};xt.on(et.TICK,(function(t){mt({type:yt.NODE_DRAG,data:t})})),xt.on(et.END,(function(t){mt({type:yt.NODE_DRAG_END,data:t})})),xt.on(et.SIMULATION_START,(function(){mt({type:yt.SIMULATION_START})})),xt.on(et.SIMULATION_PROGRESS,(function(t){mt({type:yt.SIMULATION_PROGRESS,data:t})})),xt.on(et.SIMULATION_END,(function(t){mt({type:yt.SIMULATION_END,data:t})})),xt.on(et.NODE_DRAG,(function(t){mt({type:yt.NODE_DRAG,data:t})})),xt.on(et.SETTINGS_UPDATE,(function(t){mt({type:yt.SETTINGS_UPDATE,data:t})})),addEventListener("message",(function(t){var n=t.data;switch(n.type){case dt.ActivateSimulation:xt.activateSimulation();break;case dt.SetData:xt.setData(n.data);break;case dt.AddData:xt.addData(n.data);break;case dt.UpdateData:xt.updateData(n.data);break;case dt.ClearData:xt.clearData();break;case dt.Simulate:xt.simulate();break;case dt.StartSimulation:xt.startSimulation(n.data);break;case dt.UpdateSimulation:xt.updateSimulation(n.data);break;case dt.StopSimulation:xt.stopSimulation();break;case dt.StartDragNode:xt.startDragNode();break;case dt.DragNode:xt.dragNode(n.data);break;case dt.FixNodes:xt.fixNodes(n.data.nodes);break;case dt.ReleaseNodes:xt.releaseNodes(n.data.nodes);break;case dt.EndDragNode:xt.endDragNode(n.data);break;case dt.SetSettings:xt.setSettings(n.data)}}))}();
//# sourceMappingURL=process.worker.e308d4cc.chunk.js.map